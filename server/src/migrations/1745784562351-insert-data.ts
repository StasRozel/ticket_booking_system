import { MigrationInterface, QueryRunner } from "typeorm";

export class InsertData1745784562351 implements MigrationInterface {

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(
            `-- Вставка данных в таблицу Routes (Маршруты)
INSERT INTO Routes (name, starting_point, ending_point, stops, distance, price) VALUES
('Минск - Гродно', 'Минск', 'Гродно', 'Лида, Щучин', 280.00, 15.00),
('Минск - Брест', 'Минск', 'Брест', 'Барановичи, Кобрин', 340.00, 18.00),
('Витебск - Гомель', 'Витебск', 'Гомель', 'Орша, Могилёв', 320.00, 16.50),
('Гродно - Брест', 'Гродно', 'Брест', 'Волковыск, Пружаны', 230.00, 12.00),
('Минск - Витебск', 'Минск', 'Витебск', 'Борисов, Орша', 250.00, 13.50),
('Минск - Могилёв', 'Минск', 'Могилёв', 'Борисов, Березино', 200.00, 10.50),
('Брест - Пинск', 'Брест', 'Пинск', 'Ивацевичи, Дрогичин', 140.00, 8.00),
('Гомель - Бобруйск', 'Гомель', 'Бобруйск', 'Речица, Жлобин', 130.00, 7.50),
('Витебск - Новополоцк', 'Витебск', 'Новополоцк', 'Полоцк', 100.00, 6.00),
('Минск - Лида', 'Минск', 'Лида', 'Столбцы, Новогрудок', 150.00, 9.00),
('Гродно - Витебск', 'Гродно', 'Витебск', 'Минск, Орша', 400.00, 20.00),
('Могилёв - Брест', 'Могилёв', 'Брест', 'Бобруйск, Барановичи', 420.00, 22.00),
('Минск - Пинск', 'Минск', 'Пинск', 'Слуцк, Лунинец', 260.00, 14.00),
('Гомель - Мозырь', 'Гомель', 'Мозырь', 'Калинковичи', 90.00, 5.50),
('Брест - Гомель', 'Брест', 'Гомель', 'Пинск, Жлобин', 450.00, 23.50);

-- Вставка данных в таблицу Buses (Автобусы)
INSERT INTO Buses (bus_number, capacity, type, available) VALUES
('BY1234', ARRAY(SELECT generate_series(1, 20)), 'Микроавтобус Mercedes Sprinter', TRUE),
('BY5678', ARRAY(SELECT generate_series(1, 18)), 'Микроавтобус Ford Transit', TRUE),
('BY9012', ARRAY(SELECT generate_series(1, 22)), 'Микроавтобус Volkswagen Crafter', TRUE),
('BY3456', ARRAY(SELECT generate_series(1, 19)), 'Микроавтобус Iveco Daily', TRUE),
('BY7890', ARRAY(SELECT generate_series(1, 21)), 'Микроавтобус Peugeot Boxer', TRUE),
('BY2345', ARRAY(SELECT generate_series(1, 20)), 'Микроавтобус Mercedes Sprinter', TRUE),
('BY6789', ARRAY(SELECT generate_series(1, 17)), 'Микроавтобус Fiat Ducato', TRUE),
('BY0123', ARRAY(SELECT generate_series(1, 23)), 'Микроавтобус Volkswagen Crafter', TRUE),
('BY4567', ARRAY(SELECT generate_series(1, 18)), 'Микроавтобус Ford Transit', TRUE),
('BY8901', ARRAY(SELECT generate_series(1, 21)), 'Микроавтобус Iveco Daily', TRUE),
('BY1122', ARRAY(SELECT generate_series(1, 19)), 'Микроавтобус Peugeot Boxer', TRUE),
('BY3344', ARRAY(SELECT generate_series(1, 20)), 'Микроавтобус Mercedes Sprinter', TRUE);

-- Вставка данных в таблицу Schedules (Расписания)
INSERT INTO Schedules (route_id, departure_time, arrival_time) VALUES
(1, '08:00:00', '12:30:00'), -- Минск - Гродно
(1, '14:00:00', '18:30:00'), -- Минск - Гродно
(1, '18:00:00', '22:30:00'), -- Минск - Гродно
(2, '07:30:00', '12:00:00'), -- Минск - Брест
(2, '13:00:00', '17:30:00'), -- Минск - Брест
(2, '16:00:00', '20:30:00'), -- Минск - Брест
(3, '09:00:00', '14:00:00'), -- Витебск - Гомель
(3, '15:00:00', '20:00:00'), -- Витебск - Гомель
(4, '10:00:00', '13:30:00'), -- Гродно - Брест
(4, '16:00:00', '19:30:00'), -- Гродно - Брест
(5, '08:30:00', '12:00:00'), -- Минск - Витебск
(5, '15:00:00', '18:30:00'), -- Минск - Витебск
(5, '19:00:00', '22:30:00'), -- Минск - Витебск
(6, '07:00:00', '10:00:00'), -- Минск - Могилёв
(6, '13:00:00', '16:00:00'), -- Минск - Могилёв
(7, '09:00:00', '11:30:00'), -- Брест - Пинск
(7, '15:00:00', '17:30:00'), -- Брест - Пинск
(8, '08:00:00', '10:15:00'), -- Гомель - Бобруйск
(8, '14:00:00', '16:15:00'), -- Гомель - Бобруйск
(9, '10:00:00', '11:30:00'), -- Витебск - Новополоцк
(9, '16:00:00', '17:30:00'), -- Витебск - Новополоцк
(10, '08:00:00', '10:30:00'), -- Минск - Лида
(10, '14:00:00', '16:30:00'), -- Минск - Лида
(11, '07:00:00', '14:00:00'), -- Гродно - Витебск
(12, '06:00:00', '13:30:00'), -- Могилёв - Брест
(13, '09:00:00', '13:00:00'), -- Минск - Пинск
(13, '15:00:00', '19:00:00'), -- Минск - Пинск
(14, '10:00:00', '11:30:00'), -- Гомель - Мозырь
(14, '16:00:00', '17:30:00'), -- Гомель - Мозырь
(15, '06:30:00', '14:30:00'), -- Брест - Гомель
(15, '12:00:00', '20:00:00'); -- Брест - Гомель

-- Вставка данных в таблицу BusSchedules (Привязка автобусов к расписанию)
INSERT INTO BusSchedules (schedule_id, bus_id, operating_days) VALUES
(1, 1, '2025-05-20'), -- Минск - Гродно, утренний
(2, 2, '2025-05-21'), -- Минск - Гродно, дневной
(3, 3, '2025-05-22'), -- Минск - Гродно, вечерний
(4, 4, '2025-05-23'), -- Минск - Брест, утренний
(5, 5, '2025-05-24'), -- Минск - Брест, дневной
(6, 6, '2025-05-25'), -- Минск - Брест, вечерний
(7, 7, '2025-05-26'), -- Витебск - Гомель, утренний
(8, 8, '2025-05-27'), -- Витебск - Гомель, дневной
(9, 9, '2025-05-28'), -- Гродно - Брест, утренний
(10, 10, '2025-05-29'), -- Гродно - Брест, дневной
(11, 11, '2025-05-30'), -- Минск - Витебск, утренний
(12, 12, '2025-05-31'), -- Минск - Витебск, дневной
(13, 1, '2025-06-01'), -- Минск - Витебск, вечерний
(14, 2, '2025-06-02'), -- Минск - Могилёв, утренний
(15, 3, '2025-06-03'), -- Минск - Могилёв, дневной
(16, 4, '2025-06-04'), -- Брест - Пинск, утренний
(17, 5, '2025-06-05'), -- Брест - Пинск, дневной
(18, 6, '2025-06-06'), -- Гомель - Бобруйск, утренний
(19, 7, '2025-06-07'), -- Гомель - Бобруйск, дневной
(20, 8, '2025-06-08'), -- Витебск - Новополоцк, утренний
(21, 9, '2025-06-09'); 

INSERT INTO roles(name) VALUES ('admin'), ('user');`
        );
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`
            --Отключение проверки внешних ключей (на время очистки)
SET CONSTRAINTS ALL DEFERRED;

-- Очистка таблиц
-- Очистка всех таблиц с учётом зависимостей
TRUNCATE TABLE Routes, Buses, Schedules, BusSchedules CASCADE;

-- Сброс последовательностей для автоинкрементных полей
ALTER SEQUENCE busSchedules_id_seq RESTART WITH 1;
ALTER SEQUENCE schedules_id_seq RESTART WITH 1;
ALTER SEQUENCE routes_id_seq RESTART WITH 1;
ALTER SEQUENCE buses_id_seq RESTART WITH 1;

-- Включение проверки внешних ключей обратно
SET CONSTRAINTS ALL IMMEDIATE;
            `)
    }

}
